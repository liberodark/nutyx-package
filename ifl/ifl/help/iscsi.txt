Note: A copy of this file will also be available in the /etc/iscsi directory
while running from the IFL disk.

As of boot disk version LBD220EN, the iscsi daemon is not started automatically
by default. It can be configured to do so in config.txt when creating a custom
boot disk. The 'start-iscsi' command has been added to manually start iscsi on
the default boot disk.


To customize the iscsi configuration:

- if desired, modify the contents of the iscsi directory as needed

- if desired, uncomment the ISCSI_START option in config.txt to enable 
  automatic iscsi startup on boot. It can also be started manually with
  'start-iscsi'.

- build a customized version of the IFL disk by using the makeISO, makeHDD, or
  makePXE script. 

- the /c option is required for makeHDD and makePXE in order to create a 
  custom version. Otherwise, all changes made will be ignored.

Doing the above will replace the default /etc/iscsi directory in the root file
system with the edited contents of the iscsi directory in the IFL distribution
directory. Note that the initial contents (before editing) of the iscsi 
directory are the same as the default /etc/iscsi directory in the root file 
system. If no changes are made, iscsi operation will remain the same as the
default configuration.

On boot, if the ISCSI_START option in config.txt was uncommented, the iscsi 
kernel modules will be automatically loaded, and the iscsid daemon will be 
automatically started. If not, the same can be accomplished manually with
the 'start-iscsi' command. Note that the default configuration file is for
"manual" operation, so that no targets will be discovered or logged into 
automatically. This can be changed by editing iscsid.conf configuration file
when creating the custom boot disk.


Some useful commands for the default iscsi configuration (manual):

1. Discover all targets at a specified IP address:
iscsiadm -m discovery -t st -p x.x.x.x  (-p specifies IP address of target)

2. List all discovered targets:
iscsiadm -m node

3. Login to all discovered targets:
iscsiadm -m node --loginall=manual  (targets will now be seen as sdx devices)

4. Logout from all targets:
iscsiadm -m node --logoutall=all
